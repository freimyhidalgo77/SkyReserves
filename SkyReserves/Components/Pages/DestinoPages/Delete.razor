@page "/Destino/Delete/{DestinoId:int}"
@rendermode InteractiveServer
@inject DestinoService destinoService
@inject NavigationManager navigation
@inject ToastService Toast
<link rel="stylesheet" href="/Style/Destino/DestinoCreate.css" />

<Toasts class="p-3" AutoHide="true" Delay="4000" Placement="ToastsPlacement.TopRight" />


<PageTitle>Destino de vuelo</PageTitle>
<div class="container">
	<div class="card shadow-lg">
		<div class="card-header">
			<h3><strong>Eliminar destino de vuelos</strong></h3>
		</div>
		<div class="card-body">
			<h5><strong>Est&aacute;s seguro que deseas eliminar este vuelo destino de vuelo?</strong></h5>
			<div class="mb-1">
				<p><strong>Destino vuelo ID:</strong>@destino?.DestinoId</p>
			</div>
			<div class="mb-1">
				<p><strong>Destino:</strong>@destino?.destino</p>
			</div>
		</div>
	</div>

	<div class="card-footer">
		<button type="button" class="btn btn-info text-white bi bi-arrow-90deg-left" @onclick="Volver">Volver</button>
		<button type="button" class="btn btn-purple bi bi-trash" @onclick="ElimnarDestino">Eliminar</button>


	</div>
</div>



@code {


	[Parameter]
	public int DestinoId { get; set; }
	public List<Destino> destinoList { get; set; } = new List<Destino>();
	public Destino destino { get; set; } = new Destino();
	public string mensaje { get; set; } = string.Empty;

	protected override async Task OnInitializedAsync()
	{
		destino = await destinoService.Buscar(DestinoId);
	}



	public async Task ElimnarDestino()
	{
		if (destino != null)
		{
			var eliminado = await destinoService.Eliminar(DestinoId);
			if (eliminado)
			{
				await Task.Delay(4000);
				navigation.NavigateTo("/Destino/Index");
				Toast.Notify(new(ToastType.Danger, "Destino de vuelo eliminado", "El destino de vuelo se ha eliminado correctamnete"));
			}
			else
			{
				Toast.Notify(new(ToastType.Warning, "Error al eliminar el destino de vuelo", "El destino de vuelo no se pudo eliminar correctamente"));
			}
		}

	}

	public void Volver()
	{
		navigation.NavigateTo("/Destino/Index");
	}
}